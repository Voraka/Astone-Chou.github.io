<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Astone</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Astone">
<meta property="og:url" content="http://astone.space/index.html">
<meta property="og:site_name" content="Astone">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Astone">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Astone" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/img/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Astone</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Keep It Simple, Stupid.</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>

					

					
					<p class="header-subtitle">caliburn_marco@163.com</p>
					

					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>

				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/TCP/" style="font-size: 18.57px;">TCP</a> <a href="/tags/algorithm/" style="font-size: 15.71px;">algorithm</a> <a href="/tags/asm/" style="font-size: 15.71px;">asm</a> <a href="/tags/elk/" style="font-size: 10px;">elk</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/linux/" style="font-size: 14.29px;">linux</a> <a href="/tags/lua/" style="font-size: 20px;">lua</a> <a href="/tags/note/" style="font-size: 17.14px;">note</a> <a href="/tags/python/" style="font-size: 12.86px;">python</a> <a href="/tags/unix/" style="font-size: 11.43px;">unix</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Astone</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img src="/img/avatar.jpg" class="js-avatar" style="width: 100%;height: 100%;opacity: 1;">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Astone</h1>
			</hgroup>
			
			<p class="header-subtitle">Keep It Simple, Stupid.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-Elastic Stack/Elastic Stack--简介" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/06/06/Elastic Stack/Elastic Stack--简介/" class="article-date">
  	<time datetime="2017-06-06T07:51:09.956Z" itemprop="datePublished">2017-06-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/06/Elastic Stack/Elastic Stack--简介/">Elastic Stack--简介</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Elastic-Stack"><a href="#Elastic-Stack" class="headerlink" title="Elastic Stack"></a><strong>Elastic Stack</strong></h3><p>　　<a href="https://www.elastic.co/cn/">Elastic Stack</a> 是一个实时分布式数据统计分析的技术栈。通常由 <strong>Beats</strong>、<strong>Logstash</strong>、<strong>Elastic Search</strong>、<strong>Kibana</strong> 组成的。Elastic Search 作为 Elastic Stack 的核心是一个易扩展的分布式实时搜索引擎，与同样是基于 Apache Lucene 框架的 Solr 相比，Elastic Search 对不断更新的数据有着更高的查询效率。在实时日志处理领域 Elastic Stack 是开源项目中最好的选择之一。对于日志处理的场景 Elastic Stack 的组成如下图:</p>
<p><center><img src="/source_img/elastic_stack1.png" alt="elastic_stack1"></center><br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/elk/">elk</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Elastic-Stack/">Elastic Stack</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2017/06/06/Elastic Stack/Elastic Stack--简介/#more">more</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-数据结构与算法/数据结构与算法--Newton&#39;s Method" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/22/数据结构与算法/数据结构与算法--Newton's Method/" class="article-date">
  	<time datetime="2016-12-22T05:27:25.098Z" itemprop="datePublished">2016-12-22</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/22/数据结构与算法/数据结构与算法--Newton's Method/">数据结构与算法--Newton&#39;s Method</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>　　Newton Method 是一种在实数域和复数域上近似求解方程的方法. 它使用函数$f(x)$的泰勒级数的前几项来寻找方程 $f(x)$ = 0 的根.<br>　　首先, 选择一个接近函数 $f(x)$ 零点的 $x_{0}$ 计算相应的 $f(x_{0})$ 和 $f’(x_{0})$. 然后计算穿过点 $(x_{0},f(x_{0}))$ 且斜率为 $f’(x_{0})$ 的直线和 $x$ 轴的交点的 $x$ 坐标, 也就是求如下方程的解：$$0=(x-x_{0})\cdot f’(x_{0})+f(x_{0})$$ 将新求得的 $x$ 坐标命名为 $x_{1}$, 通常 $x_{1}$ 会比 $x_{0}$更接近方程 $f(x)$ = 0 的根. 因此通过迭代可以得到方程的近似解. 迭代公式可化简为如下所示: $$x_{n+1}=x_{n}-{\frac {f(x_{n})}{f’(x_{n})}}$$　　例如, 使用 Newton Method 来实现 sqrt. 已知方程 $y=\sqrt x$, 在已知 $x$ 的情况下求 $y$ 的值. 既然已知 $x$, 假设 $x$ 值为 $C$. 那么求 $y$ 的值即是求解方程 $y^2-C=0$ 的根. 设 $f(x)=x^2-C$ 套用迭代公式可得: $$x_{n+1}=\frac {x_{n}^2+C}{2x_{n}}$$ 实现代码如下:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">sqrt</span><span class="params">(<span class="keyword">float</span> x)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> y = <span class="number">1.0f</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">fabs</span>(y * y - x) &gt; <span class="number">1e-3</span>)</span><br><span class="line">        y = <span class="number">0.5f</span> * (y + x / y);</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/数据结构与算法/">数据结构与算法</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-TCP 协议分析/TCP 协议分析--流模式" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/21/TCP 协议分析/TCP 协议分析--流模式/" class="article-date">
  	<time datetime="2016-12-21T06:48:09.608Z" itemprop="datePublished">2016-12-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/21/TCP 协议分析/TCP 协议分析--流模式/">TCP 协议分析--流模式</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a><strong>Stream</strong></h3><p>　　TCP 是流模式协议. 所谓流模式就是将传输的数据看成连续的. 例如当 send 发送 10K 的数据时, TCP 会根据 MSS 分成许多 TCP 包. 而在接收的时候我们可能需要 recv 多次才能接收一个完整的上层协议包. 另外, 当我们连续 send 两个小包时, TCP 有可能只发送了一个 TCP 包. 而当我们接收时只调用了一次 recv 就接收了两个包的数据. TCP 通过 Seq 来保证 Segment 的顺序.</p>
<h3 id="Datagram"><a href="#Datagram" class="headerlink" title="Datagram"></a><strong>Datagram</strong></h3><p>　　UDP 是数据报协议. 所谓数据报就是数据看成独立的报文. 例如当 sendto 发送数据时, UDP 不会对数据进行拆分, 而是完整的发送一个 UDP 数据报. 在 recvfrom 的时候也只会收到一次单独的数据报. UDP 并不保证数据报到达的顺序性和可靠性.</p>
<p>　　TCP 之所以能够使用流模式是因为它是一个全双工面向连接的协议–只有一个对端. 而 UDP 允许有多个对端, 多个对端之间无法协调序号, 接收方无法进行组合, 所以采用数据报的形式.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TCP/">TCP</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/TCP-协议分析/">TCP 协议分析</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Python/Python 小工具--Web 爬虫" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/17/Python/Python 小工具--Web 爬虫/" class="article-date">
  	<time datetime="2016-12-17T08:09:17.544Z" itemprop="datePublished">2016-12-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/17/Python/Python 小工具--Web 爬虫/">Python 小工具--Web 爬虫</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>　　最近发现以前看的小说已经养肥了, 但是都需要在线看界面也不太友好, 于是写了这个爬虫把小说下载下来. 在网上搜了一圈, 发现 <a href="http://www.lread.net">lread</a> 上质量挺不错的. 需要使用两个 python 库 re 和 requests. re 用于正则表达式, 可以很方便的进行匹配. requests 用于进行 http 请求. 严格说来这个小工具算不上真正意义上的爬虫.<br>　　首先, 在 lread 中找到小说的目录. 分析目录的 html 后把小说中每个章节的链接按顺序保存起来. 然后, 再遍历所有的章节. 分析章节中的 html 把小说的文本保存下来.<br>　　本来是很简单的事情, 但是碰到了一个中文编码和 HTML 编码的问题. html 的 charset 如果等于 utf8 那么就不会有问题, 因为脚本也使用 utf8 编码. 但如果是 gbk, 中文编码常用的有好几个版本 gb2312, gbk, gb18030 等, 但实际上他们是包含关系 gb2313 &lt; gbk &lt; gb18030. 因此无需理会到底是哪个版本, 用 gb18030 去 decode 就对了, 然后再 encode 成 utf8 保存. 在 html 中有些中文和特殊符号 (eg. &amp;nbsp, &amp;amp, &amp;#20013 ;) 进行了 HTML 转义. 可以使用 HTMLParser 转义回来.<br>　　正则代码如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pattern = re.compile(<span class="string">r'&lt;dd&gt;&lt;a href="(.*)" title=.*&lt;/dd&gt;'</span>)</span><br><span class="line">chapters = pattern.findall(content)</span><br></pre></td></tr></table></figure></p>
<p>　　另外, 小说的名字是「琥珀之剑」, 阅读用的 App「简读」.<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Python-小工具/">Python 小工具</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2016/12/17/Python/Python 小工具--Web 爬虫/#more">more</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-数据结构与算法/数据结构与算法--Circular Queue" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/13/数据结构与算法/数据结构与算法--Circular Queue/" class="article-date">
  	<time datetime="2016-12-13T07:25:06.150Z" itemprop="datePublished">2016-12-13</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/13/数据结构与算法/数据结构与算法--Circular Queue/">数据结构与算法--Circular Queue</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>　　循环队列 (Circular Queue) 是一种首尾相接的环形数据结构, 符合队列先进先出的特性. 循环队列通常有双向链表和数组两种实现方式, 双向链表的实现可以动态的扩展队列的容量. 数组方式通常固定容量常用于实现 FIFO 的缓冲区. 如果写操作允许覆盖未被处理的数据, eg. 音频输出端允许覆盖声卡未来得及处理的音频数据. 这时使用数组方式是非常好的. 否则, 可以使用双向链表的实现.<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm/">algorithm</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/数据结构与算法/">数据结构与算法</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2016/12/13/数据结构与算法/数据结构与算法--Circular Queue/#more">more</a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-center">
    		&copy; 2017 Astone
    	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
<script src="http://cdn.bootcss.com/require.js/2.1.22/require.min.js"></script>
<script src="/js/main.js"></script>





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>